# GuardrailsOrchestrator Configuration ConfigMap for Claims Demo
# Configures HAP and PII detection for claim processing
apiVersion: v1
kind: ConfigMap
metadata:
  name: claims-guardrails-config
  namespace: claims-demo
  labels:
    app: claims-processing
    component: guardrails
data:
  config.yaml: |
    # Chat generation service configuration (where to forward after detection)
    # Note: chat_generation is deprecated but functional - will migrate to 'generation' format later
    # No TLS field = HTTP connection to LlamaStack
    chat_generation:
      service:
        # LlamaStack inference endpoint (HTTP)
        hostname: claims-llamastack-service.claims-demo.svc.cluster.local
        port: 8321

    # Detector configurations
    detectors:
      # Contains word detector for testing (built-in detector sidecar)
      contains_word:
        type: text_contents
        service:
          # Built-in detector runs as sidecar on localhost
          hostname: "127.0.0.1"
          port: 8080
        chunker_id: whole_doc_chunker
        default_threshold: 0.5

      # Over 100 characters detector
      over_100_characters:
        type: text_contents
        service:
          hostname: "127.0.0.1"
          port: 8080
        chunker_id: whole_doc_chunker
        default_threshold: 0.5
